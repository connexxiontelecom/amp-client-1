(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2650ffc8"],{"0f91":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailJSResponseStatus=e.sendForm=e.send=e.init=void 0;var i=a("3245");Object.defineProperty(e,"EmailJSResponseStatus",{enumerable:!0,get:function(){return i.EmailJSResponseStatus}});var s=a("5129"),n=null,o="https://api.emailjs.com";function r(t,e,a){return void 0===a&&(a={}),new Promise((function(s,n){var o=new XMLHttpRequest;for(var r in o.addEventListener("load",(function(t){var e=new i.EmailJSResponseStatus(t.target);200===e.status||"OK"===e.text?s(e):n(e)})),o.addEventListener("error",(function(t){n(new i.EmailJSResponseStatus(t.target))})),o.open("POST",t,!0),a)o.setRequestHeader(r,a[r]);o.send(e)}))}function l(t){var e=document&&document.getElementById("g-recaptcha-response");return e&&e.value&&(t["g-recaptcha-response"]=e.value),e=null,t}function f(t){return"#"!==t[0]&&"."!==t[0]?"#"+t:t}function c(t,e){n=t,o=e||"https://api.emailjs.com"}function u(t,e,a,i){var s={lib_version:"2.6.4",user_id:i||n,service_id:t,template_id:e,template_params:l(a)};return r(o+"/api/v1.0/email/send",JSON.stringify(s),{"Content-type":"application/json"})}function d(t,e,a,i){if("string"===typeof a&&(a=document.querySelector(f(a))),!a||"FORM"!==a.nodeName)throw"Expected the HTML form element or the style selector of form";s.UI.progressState(a);var l=new FormData(a);return l.append("lib_version","2.6.4"),l.append("service_id",t),l.append("template_id",e),l.append("user_id",i||n),r(o+"/api/v1.0/email/send-form",l).then((function(t){return s.UI.successState(a),t}),(function(t){return s.UI.errorState(a),Promise.reject(t)}))}e.init=c,e.send=u,e.sendForm=d,e.default={init:c,send:u,sendForm:d}},"1d9f":function(t,e,a){},3245:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EmailJSResponseStatus=void 0;var i=function(){function t(t){this.status=t.status,this.text=t.responseText}return t}();e.EmailJSResponseStatus=i},"37a4":function(t,e,a){"use strict";var i=a("0f91"),s=a.n(i);e["a"]={methods:{getAffiliates:function(){var t=this;this.$store.dispatch("affiliate/getAffiliates").then().catch((function(e){t.toast("Get All Affiliates","BellIcon",e.response.data.messages.error,"danger")}))},addAffiliate:function(){var t=this;this.$refs.addAffiliateValidation.validate().then((function(e){if(e){var a=0;a=null!==t.upstreamAffiliate?t.upstreamAffiliate.value:0;var i={firstname:t.firstname,lastname:t.lastname,username:t.username,email:t.emailAddr,password:t.password,verifyCode:t.generateVerifyCode(10),upstreamAffiliate:a};t.$store.dispatch("affiliate/addAffiliate",{form:i}).then((function(){s.a.send("service_oeg9olb","template_kr3wkls",{firstname:i.firstname,lastname:i.lastname,creator:"administrator",username:i.username,password:i.password,verify_code:i.verifyCode,to_email:i.email},"user_BcSkabdz4FX6q4l5oeeXI").catch((function(){})),t.$router.push({name:"affiliate-accounts"}).then((function(){t.toast("Add Affiliate","BellIcon","The affiliate was added successfully","success")}))})).catch((function(e){t.toast("Add Admin Attempt","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Add Affiliate Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},getAffiliate:function(t){var e=this;this.$store.dispatch("affiliate/getAffiliate",{affiliateID:t}).then((function(){e.$router.push({name:"view-affiliate",params:{affiliateID:t}}).catch()})).catch((function(t){e.toast("Get Affiliate","BellIcon",t.response.data.messages.error,"danger")}))},toggleStatus:function(t,e){var a=this;"1"===t?this.$bvModal.msgBoxConfirm("Please confirm that you want to deactivate this account?",{title:"Deactivate Account",size:"sm",okVariant:"primary",okTitle:"Confirm",cancelTitle:"Cancel",cancelVariant:"outline-secondary",hideHeaderClose:!1,centered:!0}).then((function(t){t&&a.$store.dispatch("affiliate/toggleAffiliateStatus",{affiliateID:e}).then((function(){a.toast("Deactivate Account","BellIcon","The affiliate was deactivated successfully","success")})).catch((function(t){a.toast("Deactivate Account","BellIcon",t.response.data.messages.error,"danger")}))})):"0"===t&&this.$bvModal.msgBoxConfirm("Please confirm that you want to reactivate this account?",{title:"Reactivate Account",size:"sm",okVariant:"primary",okTitle:"Confirm",cancelTitle:"Cancel",cancelVariant:"outline-secondary",hideHeaderClose:!1,centered:!0}).then((function(t){t&&a.$store.dispatch("affiliate/toggleAffiliateStatus",{affiliateID:e}).then((function(){a.toast("Reactivate Account","BellIcon","The affiliate was reactivated successfully","success")})).catch((function(t){a.toast("Reactivate Account","BellIcon",t.response.data.messages.error,"danger")}))}))},updateAffiliateAccount:function(){var t=this;this.$refs.updateAffiliateAccountValidation.validate().then((function(e){if(e){var a=0;a=null!==t.upstreamAffiliate?t.upstreamAffiliate.value:0;var i={affiliateID:t.affiliateID,firstname:t.firstname,lastname:t.lastname,email:t.emailAddr,upstreamAffiliate:a};t.$store.dispatch("affiliate/updateAffiliateAccount",{form:i}).then((function(){t.toast("Update Affiliate Account","BellIcon","You have successfully updated the affiliate account","success"),t.$nextTick((function(){t.$refs["update-affiliate-modal"].toggle("#edit-affiliate-btn")}))})).catch((function(e){t.toast("Update Affiliate Attempt","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Affiliate Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},updateAffiliateInfo:function(){var t=this;this.$refs.updateAffiliateInformationValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,affiliateInfoID:t.affiliateInfoID,dob:t.dob,mobile:t.mobile,gender:t.gender,address:t.address,country:t.country};t.$store.dispatch("affiliate/updateAffiliateInformation",{form:a}).then((function(){t.toast("Update Affiliate Information","BellIcon","You have successfully updated the affiliate information","success"),t.$nextTick((function(){t.$refs["update-info-modal"].toggle("#edit-info-btn")}))})).catch((function(e){t.toast("Update Affiliate Info Attempt","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Affiliate Info Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},updateAffiliateBank:function(){var t=this;this.$refs.updateAffiliateBankValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,bankID:t.bankID,bankName:t.bankName,bankAccountName:t.bankAccountName,bankAccountNumber:t.bankAccountNumber};t.$store.dispatch("affiliate/updateAffiliateBank",{form:a}).then((function(){t.toast("Update Affiliate Bank","BellIcon","You have successfully updated the affiliate bank","success"),t.$nextTick((function(){t.$refs["update-bank-modal"].toggle("#edit-bank-btn")}))})).catch((function(e){t.toast("Update Affiliate Bank Attempt","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Affiliate Bank Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},updateAccount:function(){var t=this;this.$refs.editAccountValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,firstname:t.firstname,lastname:t.lastname,email:t.emailAddr};t.$store.dispatch("affiliate/updateAccount",{form:a}).then((function(){t.toast("Update Account","BellIcon"," You have successfully updated your account","success")})).catch((function(e){t.toast("Update Account","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Account Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},updateInfo:function(){var t=this;this.$refs.editInfoValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,affiliateInfoID:t.affiliateInfoID,dob:t.dob,mobile:t.mobile,gender:t.gender,address:t.address,country:t.country};t.$store.dispatch("affiliate/updateInfo",{form:a}).then((function(){t.toast("Update Information","BellIcon","You have successfully updated your information","success")})).catch((function(e){t.toast("Update Information","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Information Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},updateBank:function(){var t=this;this.$refs.editBankValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,bankID:t.bankID,bankName:t.bankName,bankAccountName:t.bankAccountName,bankAccountNumber:t.bankAccountNumber};t.$store.dispatch("affiliate/updateBank",{form:a}).then((function(){t.toast("Update Bank","BellIcon","You have successfully updated your bank","success")})).catch((function(e){t.toast("Update Bank","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Update Bank Attempt","BellIcon","You must fill in all form fields correctly","warning")}))},getDownstreamAffiliates:function(t){var e=this;this.$store.dispatch("affiliate/getDownstreamAffiliates",{affiliateID:t}).then().catch((function(t){e.toast("Get Downstream Affiliates","BellIcon",t.response.data.messages.error,"danger")}))},addDownstreamAffiliate:function(){var t=this;this.$refs.addDownstreamAffiliateValidation.validate().then((function(e){if(e){var a={firstname:t.firstname,lastname:t.lastname,username:t.username,email:t.emailAddr,password:t.password,upstreamAffiliate:t.upstreamAffiliate};t.$store.dispatch("affiliate/addDownstreamAffiliate",{form:a}).then((function(){s.a.send("service_oeg9olb","template_kr3wkls",{firstname:a.firstname,lastname:a.lastname,creator:"affiliate",username:a.username,password:a.password,verify_code:a.verifyCode,to_email:a.email},"user_BcSkabdz4FX6q4l5oeeXI").catch((function(){})),t.toast("Add Affiliate","BellIcon","You have successfully added an affiliate","success")})).catch((function(e){t.toast("Add Affiliate","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Add Affiliate","BellIcon","You must fill in all form fields correctly","warning")}))},getDownstreamAffiliate:function(t){var e=this;this.$store.dispatch("affiliate/getAffiliate",{affiliateID:t}).then((function(){e.$router.push({name:"view-downstream-affiliate",params:{affiliateID:t}}).catch()})).catch((function(t){e.toast("Get Affiliate","BellIcon",t.response.data.messages.error,"danger")}))},changePassword:function(){var t=this;this.$refs.changePasswordValidation.validate().then((function(e){if(e){var a={affiliateID:t.affiliateID,password:t.password,newPassword:t.newPassword,confirmPassword:t.confirmPassword};t.$store.dispatch("affiliate/changePassword",{form:a}).then((function(e){t.$router.push({name:"login"}).then((function(){t.$store.dispatch("auth/logout").then((function(){t.toast("Change Password","LogOutIcon",e.data,"success")}))}))})).catch((function(e){t.toast("Change Password","BellIcon",e.response.data.messages.error,"danger")}))}else t.toast("Change Password","BellIcon","You must fill in all form fields correctly","warning")}))},verifyAccount:function(){var t=this,e={verifyCode:this.verifyCode};this.$store.dispatch("affiliate/verifyAccount",{form:e}).then().catch((function(e){t.toast("Verify Account","BellIcon",e.response.data.messages.error,"danger")}))}}}},5129:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UI=void 0;var i=function(){function t(){}return t.clearAll=function(t){t.classList.remove(this.PROGRESS),t.classList.remove(this.DONE),t.classList.remove(this.ERROR)},t.progressState=function(t){this.clearAll(t),t.classList.add(this.PROGRESS)},t.successState=function(t){t.classList.remove(this.PROGRESS),t.classList.add(this.DONE)},t.errorState=function(t){t.classList.remove(this.PROGRESS),t.classList.add(this.ERROR)},t.PROGRESS="emailjs-sending",t.DONE="emailjs-success",t.ERROR="emailjs-error",t}();e.UI=i},6763:function(t,e,a){"use strict";a("f648")},"7bae":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{staticClass:"mb-0",attrs:{"no-body":""}},[a("div",{staticClass:"m-2"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-start mb-1 mb-md-0",attrs:{cols:"12",md:"6"}},[a("label",[t._v("Show")]),a("v-select",{staticClass:"per-page-selector d-inline-block mx-50",attrs:{options:t.perPageOptions,clearable:!1},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}}),a("label",[t._v("entries")])],1),a("b-col",{attrs:{cols:"12",md:"6"}},[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("b-form-input",{staticClass:"d-inline-block mr-1",attrs:{placeholder:"Search..."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),a("b-button",{attrs:{variant:"primary",to:{name:"add-downstream-affiliate"}}},[a("span",{staticClass:"text-nowrap"},[t._v("Add Affiliate")])])],1)])],1)],1),a("b-table",{staticClass:"position-relative mb-0",attrs:{items:t.downstreamAffiliates,fields:t.fields,"per-page":t.perPage,"current-page":t.currentPage,filter:t.filter,striped:"",responsive:"","show-empty":""},on:{filtered:t.onFiltered},scopedSlots:t._u([{key:"cell(username)",fn:function(e){return[a("b-media",{attrs:{"vertical-align":"center"},scopedSlots:t._u([{key:"aside",fn:function(){return[a("b-avatar",{attrs:{size:"32",rounded:"",src:"",text:t.avatarText(e.item.firstname+" "+e.item.lastname),variant:"light-success"},on:{click:function(a){return t.getDownstreamAffiliate(e.item.affiliate_id)}}})]},proxy:!0}],null,!0)},[a("b-link",{staticClass:"font-weight-bold d-block text-nowrap",on:{click:function(a){return t.getDownstreamAffiliate(e.item.affiliate_id)}}},[t._v(" "+t._s(e.item.firstname+" "+e.item.lastname)+" ")]),a("small",{staticClass:"text-muted"},[t._v("@"+t._s(e.item.username))])],1)]}},{key:"cell(status)",fn:function(e){return["1"===e.item.status?a("b-badge",{staticClass:"text-capitalize",attrs:{pill:"",variant:"light-success"}},[t._v(" Active ")]):t._e(),"0"===e.item.status?a("b-badge",{staticClass:"text-capitalize",attrs:{pill:"",variant:"light-danger"}},[t._v(" Inactive ")]):t._e()]}},{key:"cell(created_at)",fn:function(e){return[t._v(" "+t._s(new Date(e.item.created_at).toDateString())+" ")]}},{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"text-nowrap"},[a("feather-icon",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",value:"View",expression:"'View'",modifiers:{hover:!0,top:!0}}],staticClass:"cursor-pointer mx-1",attrs:{id:"view-"+e.item.affiliate_id,icon:"EyeIcon",size:"16"},on:{click:function(a){return t.getDownstreamAffiliate(e.item.affiliate_id)}}})],1)]}}])}),a("div",{staticClass:"mx-2 mb-2 mt-1"},[a("b-row",[a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-start",attrs:{cols:"12",sm:"6"}},[a("span",{staticClass:"text-muted"},[t._v("There are "+t._s(t.numDownstreamAffiliates)+" affiliate accounts")])]),a("b-col",{staticClass:"d-flex align-items-center justify-content-center justify-content-sm-end",attrs:{cols:"12",sm:"6"}},[a("b-pagination",{staticClass:"mb-0 mt-1 mt-sm-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1)],1)},s=[],n=a("5530"),o=a("205f"),r=a("34b6"),l=a("e8a3"),f=a("e98b"),c=a("a15b"),u=a("b28b"),d=a("29a1"),m=a("4797"),p=a("1947"),h=a("26d2"),v=a("aa59"),g=a("2616"),A=a("4a7a"),b=a.n(A),I=a("37a4"),w=a("0e20"),y=a("2f62"),k={components:{BCard:o["a"],BMedia:r["a"],BAvatar:l["a"],BBadge:f["a"],BRow:c["a"],BCol:u["a"],BTable:d["a"],BFormInput:m["a"],BButton:p["a"],BPagination:h["a"],BLink:v["a"],vSelect:b.a},directives:{"b-tooltip":g["a"]},mixins:[I["a"]],data:function(){return{perPage:5,perPageOptions:[5,10,25,100],filter:null,totalRows:this.$store.getters["affiliate/getNumDownstreamAffiliates"],currentPage:1,avatarText:w["a"],fields:[{key:"username",label:"user",sortable:!0},{key:"email",sortable:!0},{key:"ref_code",sortable:!0},{key:"status",label:"status"},{key:"created_at",label:"Added",sortable:!0},{key:"actions",thStyle:{width:"10%"}}]}},computed:Object(n["a"])({},Object(y["b"])({downstreamAffiliates:"affiliate/getDownstreamAffiliates",numDownstreamAffiliates:"affiliate/getNumDownstreamAffiliates"})),created:function(){this.getDownstreamAffiliates(this.$store.getters["auth/getUser"].affiliate_id)},methods:{onFiltered:function(t){this.totalRows=t.length,this.currentPage=1}}},B=k,D=(a("6763"),a("d4cb"),a("2877")),_=Object(D["a"])(B,i,s,!1,null,"7df72a34",null);e["default"]=_.exports},d4cb:function(t,e,a){"use strict";a("1d9f")},f648:function(t,e,a){}}]);
//# sourceMappingURL=chunk-2650ffc8.99905d13.js.map